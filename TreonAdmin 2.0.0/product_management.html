<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TreonAdmin Dashboard - Product Management</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="product_management.css" />
  <!-- Firebase SDK (COMPATIBILITY VERSION) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>
  <div class="sidebar">
    <div class="logo">TREON</div>
    <div class="profile">
      <div class="profile-image">
        <img src="static/Admin.png" alt="Admin Profile" />
      </div>
      <span>Admin</span>
      <span>Dashboard</span>
    </div>
    <button class="nav-button" id="dashboard-btn">Dashboard</button>
    <button class="nav-button" id="sessions-btn">Sessions</button>
    <button class="nav-button active" id="products-btn">Products</button>
    <button class="nav-button" id="settings-btn">Settings</button>
  </div>

  <div class="main">
    <div class="header-box">
      <h1>Product Management</h1>
      <p>Manage your products and monitor their performance.</p>
    </div>

    <div class="stats">
      <div class="stat-card">
        <span>Total Brands</span>
        <span id="total-products">0</span>
      </div>
      <div class="stat-card">
        <span>Average Rating</span>
        <span id="average-rating">0.0 ⭐</span>
      </div>
      <div class="stat-card">
        <span>Popular Brand</span>
        <span id="popular-product">N/A</span>
      </div>
    </div>

    <div class="form-container">
      <input type="text" id="brand" placeholder="Brand Name" />
      <div class="form-buttons">
        <button onclick="addColorField()">+ Add Color</button>
        <button class="submit-button" onclick="addProducts()" style="width: auto; margin-top: 0;">Add Products</button>
      </div>
    </div>

    <div id="color-container" class="color-container">
      <!-- Color fields will be added here -->
    </div>

    <div class="ratings-view">
      <div class="ratings-header">
        <h3>View Ratings</h3>
        <div class="clear-ratings-container">
          <button id="clear-ratings-btn" class="clear-button">Clear Ratings</button>
        </div>
      </div>
      
      <div class="selection-panel">
        <div class="selection-group">
          <label for="brand-select">Select Brand:</label>
          <select id="brand-select" onchange="loadBrandColors()">
            <option value="">-- Choose Brand --</option>
          </select>
        </div>
        
        <div class="selection-group">
          <label for="color-select">Select Color:</label>
          <select id="color-select" onchange="showColorRating()">
            <option value="">-- Choose Color --</option>
          </select>
        </div>
      </div>
      
      <div id="rating-details" class="rating-details">
        <div class="rating-header">
          <h4 id="selected-color-name">Select a color to view ratings</h4>
        </div>
        <div class="rating-display">
          <div class="large-rating">0.0</div>
          <div class="large-stars">
            <span class="large-star">☆</span>
            <span class="large-star">☆</span>
            <span class="large-star">☆</span>
            <span class="large-star">☆</span>
            <span class="large-star">☆</span>
          </div>
          <div class="rating-count">(0 ratings)</div>
        </div>
        
        <div class="rating-distribution">
          <h5>Rating Distribution</h5>
          <div class="distribution-bar">
            <div class="distribution-segment" data-rating="5" style="width: 0%"></div>
            <div class="distribution-segment" data-rating="4" style="width: 0%"></div>
            <div class="distribution-segment" data-rating="3" style="width: 0%"></div>
            <div class="distribution-segment" data-rating="2" style="width: 0%"></div>
            <div class="distribution-segment" data-rating="1" style="width: 0%"></div>
          </div>
          <div class="distribution-labels">
            <span>5 ★</span>
            <span>4 ★</span>
            <span>3 ★</span>
            <span>2 ★</span>
            <span>1 ★</span>
          </div>
        </div>
      </div>
    </div>

    <div class="products">
      <h3>Existing Products</h3>
      <div id="product-container"></div>
    </div>
  </div>

  <script src="product_management.js"></script>
</body>
</html>